<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Report Card - Input</title>
<style>
  body { font-family: Arial, sans-serif; background: #f8f9fa; margin: 0; padding: 0; }
  header { background: teal; color: white; padding: 15px; text-align: center; }
  .container { padding: 20px; max-width: 700px; margin: auto; }
  input { padding: 8px; margin: 5px; width: 120px; text-align: center; }
  button { padding: 10px 20px; margin-top: 15px; cursor: pointer; border: none; border-radius: 6px; }
  .submit-btn { background: teal; color: white; }
  .submit-btn:hover { background: darkcyan; }
  .next-btn { background: orange; color: white; }
  .next-btn:hover { background: darkorange; }
  .results-btn { background: green; color: white; margin-left: 10px; }
  .results-btn:hover { background: darkgreen; }
  .logout-btn { background: crimson; color: white; margin-left: 10px; }
  .logout-btn:hover { background: darkred; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  table, th, td { border: 1px solid #ccc; }
  th, td { padding: 10px; text-align: center; }
  th { background: #f0f0f0; }
</style>
<script>
  // Redirect if not logged in
  if (!sessionStorage.getItem("loggedIn")) {
    window.location.href = "login.html";
  }

  let students = []; // Array to store all students

  function logout() {
    sessionStorage.removeItem("loggedIn");
    window.location.href = "login.html";
  }

  function calculateStudent() {
    const name = document.getElementById("name").value.trim();
    const subjects = ["Maths","Science","English","Computer","Social Science"];
    let marks = [];
    let total = 0;

    if (!name) { alert("Enter student name"); return; }

    for (let i = 1; i <= 5; i++) {
      let val = parseInt(document.getElementById("sub"+i).value);
      if (isNaN(val) || val < 0 || val > 100) {
        alert("Enter valid marks (0-100) for all subjects");
        return;
      }
      marks.push(val);
      total += val;
    }

    let avg = total / 5;
    let grade;
    if (avg >= 90) grade = "A+";
    else if (avg >= 80) grade = "A";
    else if (avg >= 70) grade = "B+";
    else if (avg >= 60) grade = "B";
    else if (avg >= 50) grade = "C";
    else grade = "F";

    // Store student in array
    students.push({name: name, marks: marks, total: total, average: avg, grade: grade});

    // Show result for this student
    let table = "<table><tr><th>Subject</th><th>Marks</th></tr>";
    for (let i=0; i<subjects.length; i++){
      table += `<tr><td>${subjects[i]}</td><td>${marks[i]}</td></tr>`;
    }
    table += `<tr><th>Total</th><td>${total}</td></tr>`;
    table += `<tr><th>Average</th><td>${avg.toFixed(2)}</td></tr>`;
    table += `<tr><th>Grade</th><td>${grade}</td></tr></table>`;

    document.getElementById("studentResult").innerHTML = table;

    // Save all students to sessionStorage for results page
    sessionStorage.setItem("students", JSON.stringify(students));
  }

  function nextStudent() {
    document.getElementById("name").value = "";
    for (let i=1; i<=5; i++) document.getElementById("sub"+i).value = "";
    document.getElementById("studentResult").innerHTML = "";
    document.getElementById("name").focus();
  }

  function viewResults() {
    window.location.href = "results.html";
  }
</script>
</head>
<body>
<header>
<h1>ðŸ“Š Smart Report Card - Input</h1>
</header>

<div class="container">
<h2>Enter Student Name and Marks</h2>
<input type="text" id="name" placeholder="Student Name"><br>
<input type="number" id="sub1" placeholder="Maths">
<input type="number" id="sub2" placeholder="Science">
<input type="number" id="sub3" placeholder="English">
<input type="number" id="sub4" placeholder="Computer">
<input type="number" id="sub5" placeholder="Social Science"><br>

<button class="submit-btn" onclick="calculateStudent()">Calculate Grade</button>
<button class="next-btn" onclick="nextStudent()">Next Student</button>
<button class="results-btn" onclick="viewResults()">View Results</button>
<button class="logout-btn" onclick="logout()">Logout</button>

<div id="studentResult"></div>
</div>
</body>
</html>
